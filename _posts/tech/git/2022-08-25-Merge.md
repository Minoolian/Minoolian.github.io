---
layout: post
title: "Git Merge (fast-forward, 3-way, squash, rebase)"
category: tech
tags: git
image:
  path:   https://user-images.githubusercontent.com/44282342/186728852-f84ac6a1-d721-4e29-bf50-a8bac5043d83.png
---

* unordered toc
{:toc .large-only}

ì´ë²ˆ í¬ìŠ¤íŒ…ì€ **ì—¬ëŸ¬ ì¢…ë¥˜ì˜ Git Merge**ì— ëŒ€í•œ íŠ¹ì§• ì•Œì•„ë³´ë ¤í•œë‹¤.

## Fast-forward Merge
***

![fastforward](https://user-images.githubusercontent.com/44282342/186739897-6fa9268e-30f6-45d0-80a3-60a3842ea870.png)

Main branchì˜ commit ì¤‘ Feature branchì˜ ì¡°ìƒ commit ì´í›„ë¡œ `ë³€ê²½ëœ ì‚¬í•­ì´ ì—†ìœ¼ë¯€ë¡œ`, Feature branchë¥¼ Main branchë¡œ mergeí•  ê²½ìš° ìì—°ìŠ¤ë ˆ ***Main branchì™€ Feature branchì˜ Headê°€ C***ë¥¼ ê°€ë¥´í‚¤ê²Œ ëœë‹¤.

```bash
$ git switch Main
$ git merge Feature
```

## 3-way Merge
***

![3way](https://user-images.githubusercontent.com/44282342/186739643-3f3da8c6-3c2d-4b26-bdd7-f34a973929be.png)

ë‚´ê°€ ì§€ê¸ˆê¹Œì§€ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©í•œ merge ë°©ë²•ì´ë‹¤. Fast-forward mergeì—ì„œ ì¡°ìƒ commit ì´í›„ë¡œ ë³€ê²½ì‚¬í•­ì´ ìˆë‹¤ë©´ `Main branchì˜ ë§ˆì§€ë§‰ commit - C commit - ì´ë¥¼ í•©ì¹  D commit`ì„ í†µí•´ mergeê°€ ì§„í–‰ëœë‹¤.

```bash
$ git switch Main
$ git merge Feature
```

![image](https://user-images.githubusercontent.com/44282342/186743980-66cb9b37-4ced-4f92-be0a-2bc90a9441e9.png)

## Squash Merge
***

![squash](https://user-images.githubusercontent.com/44282342/186740042-b406e146-bf9e-42f0-9d08-0c18381ca492.png)

ì§€ê¸ˆë¶€í„° ë³´ê²Œë  merge ë°©ë²•ë“¤ì€ ì‚¬ìš©í•´ë³´ì§€ëŠ” ì•Šì•˜ì§€ë§Œ 3-way mergeì™€ ë‹¤ë¥´ê²Œ branchë³„ `commit ë‚´ì—­ì„ ê¹”ë”`í•˜ê²Œ ë§Œë“¤ì–´ì¤€ë‹¤ëŠ” ì¥ì ì´ ìˆë‹¤. ê·¸ ì¤‘ Squash mergeëŠ” í•©ì³ì§ˆ branchì˜ commit ë‚´ì—­ì„ ***ëª¨ë‘ í•˜ë‚˜ì˜ commitìœ¼ë¡œ í•©ì³*** ê¹”ë”í•˜ê²Œ êµ¬ì„±í•œë‹¤.

```bash
$ git switch Main
$ git merge --squash Feature

# ì¶©ëŒí•´ê²° í›„
$ git commit
```

* ### Before

![image](https://user-images.githubusercontent.com/44282342/186744850-d7836681-e2bf-4638-895f-391a40528291.png)

* ### After

![image](https://user-images.githubusercontent.com/44282342/186745640-7bb6bc41-fefa-4c66-98de-49a7df1a8d12.png)

ìœ„ ê·¸ë¦¼ì²˜ëŸ¼ 3-way mergeì™€ ë‹¤ë¥´ê²Œ Feature branchì—ì„œì˜ commitì€ ë‚¨ì§€ì•Šê³  í•˜ë‚˜ì˜ merge commitìœ¼ë¡œ í•©ì³ì ¸ Main branchê°€ ì´ì–´ì§€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.

## Rebase Merge
***

![rebase](https://user-images.githubusercontent.com/44282342/186740093-d571fa4c-69b8-4006-96f9-35f094edfd68.png)

ëª…ë ¹ì–´ ì´ë¦„ì²˜ëŸ¼ baseë¥¼ ***Re*** ë‹¤ì‹œ ì§€ì •í•˜ëŠ” ëª…ë ¹ì´ë‹¤. ì¦‰ ê¸°ì¡´ baseê°€ ì¡°ìƒ commitì´ì—ˆë‹¤ë©´ `ì§€ì •í•œ branchë¥¼ ì¡°ìƒìœ¼ë¡œ ì¬ì§€ì •`í•œë‹¤ê³  ìƒê°í•˜ë©´ ëœë‹¤. ìœ„ ê·¸ë¦¼ì—ì„œëŠ” ê°ê°ì˜ A, B, C Commitì„ ì°¨ë¡€ë¡œ ìˆœíšŒí•˜ë©´ì„œ Main branchì™€ conflictë¥¼ í•´ê²°í•˜ì—¬ ***ë¹„ë¡œì†Œ í•˜ë‚˜ì˜ branchì—ì„œ ì‘ì—…í•œ ê²ƒ***ì²˜ëŸ¼ êµ¬ì„±ì´ ëœë‹¤.  

```bash
$ git switch Feature
$ git rebase Main

# ì¶©ëŒí•´ê²° í›„
$ git rebase --continue

# Fast-forwardë¡œ Main branchì˜ Headë¥¼ ì˜®ê¸´ë‹¤.
$ git switch Main
$ git merge Feature
```

* ### Before

![image](https://user-images.githubusercontent.com/44282342/186750475-45a6b673-7f0c-4763-8166-7fac3bf52547.png)

* ### After

![image](https://user-images.githubusercontent.com/44282342/186751155-4d97efea-b804-4839-b5b9-ec5dbe705a25.png)

ìœ„ ê·¸ë¦¼ì—ì„œ ìµœì¢…ì ìœ¼ë¡œ Fast-Forwardë¥¼ í†µí•´ Main branchì˜ Headë§Œ ì˜®ê¸°ë©´ Feature branchëŠ” ì˜¨ë°ê°„ë°ì—†ê³  Main branchì—ì„œë§Œ ì‘ì—…í•œ ê²ƒì²˜ëŸ¼ êµ¬ì„±ëœë‹¤.

## ê²°ë¡ 
***

ìš”ì¦˜ í”„ë¡œì íŠ¸ë¥¼ ì—¬ëŸ¬ê°œ ì§„í–‰í•˜ê³  ìˆë‹¤ë³´ë‹ˆ **PRê³¼ Merge**ë¥¼ í• ì¼ì´ ìì£¼ ìƒê¸°ê³  ìˆë‹¤. ê¸°ë³¸ì ì¸ 3-way mergeë§Œì„ ì‚¬ìš©í•˜ê³  ìˆê¸°ì— ì—¬ëŸ¿ì´ì„œ ë§Œë“  branchê°€ logì— ë’¤ì£½ë°•ì£½ ì„ì—¬ ë³´ê¸°ê°€ ë¶ˆí¸í•˜ê²Œ ë˜ì—ˆë‹¤. ë³´ê¸°ì—ëŠ” `Rebase merge`ê°€ ***ê¸°ì¡´ commit ê¸°ë¡ë„ ì¬ì‚¬ìš©***í•  ìˆ˜ ìˆê³  ìœ ìš©í•˜ê²Œ ë³´ì´ì§€ë§Œ Remoteì— pushëœ commit ë‚´ì—­ì„ ë³€ê²½í•  ì—¬ë¶€ê°€ ìˆê¸°ì— `ì—„ì²­ë‚œ ë¦¬ìŠ¤í¬`ê°€ ìˆë‹¤ê³  í•œë‹¤. ë¶€ë”ªí˜€ë³´ë©´ ê¹¨ë‹¬ì„ ìˆ˜ ìˆì§€ë§Œ **í° í™”?**ë¥¼ ìì´ˆí•  ìˆ˜ ìˆê¸°ì— ì•„ë¬´ë˜ë„ Squash mergeì™€ Rebase MergeëŠ” íŒ€ì›ë“¤ê³¼ ìƒì˜ í›„ì— ìƒí™©ì— ì ì ˆí•˜ê²Œ ì‚¬ìš©í•´ì•¼í•  ê²ƒ ê°™ë‹¤ğŸ˜¥